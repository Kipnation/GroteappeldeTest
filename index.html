<!DOCTYPE html>
<html>
<head>

	<title>Groteappelde</title>	

	<link href="https://unpkg.com/leaflet@1.0.0/dist/leaflet.css" rel="stylesheet" type="text/css" />
	<script src="https://unpkg.com/leaflet@1.0.0/dist/leaflet-src.js"></script>
	<script src="https://unpkg.com/sql.js@0.3.2/js/sql.js"></script>

	<script src="Plugins/Leaflet.TileLayer.MBTiles.js"></script>
	
	<link href="Plugins/L.Control.BetterScale.css" rel="stylesheet" />
	<script src="Plugins/L.Control.BetterScale.js"></script>

	<meta charset="utf-8">
<style>
	body { margin:0; padding:0; }
	#map { position: absolute; top:0; bottom:0; right:0; left:0; }
 	#map-title { position: relative; margin-top: 10px; margin-left: 50px; float: left; background: white; border: 2px solid rgba(0,0,0,0.2); 
		     padding: 6px 8px; font-family: Helvetica; font-weight: bold; font-size: 24px; z-index: 800; }
</style>
</head>

<body>
  
	<div id="map-title">Groteappelde</div>
	<div id='map'></div>

<script>
  
    	var map = new L.map('map', {
     	 	center: [40.6078, -74.2603],
		zoom: 15,
     	 	scrollWheelZoom: true,
  	});
	  
	var mb = L.tileLayer.mbTiles('Maps/Test-Tile5.mbtiles', {
		noWrap: true,
		minZoom: 12,
		maxZoom: 17,
	}).addTo(map);
	  
	var bounds = L.latLngBounds([[40.5744, -74.3032], [40.6407, -74.2160]]);
		map.setMaxBounds(bounds);
		map.on('drag', function() {
		map.panInsideBounds(bounds, { animate: false });
	});
	  
	L.control.betterscale({maxWidth: 225}).addTo(map);  
	
	var GuildIcon = L.Icon.extend({
  	  options: {
    	    shadowUrl: 'Icons/marker-shadow.png',
        	iconSize:     [26, 39],
        	shadowSize:   [40, 50],
        	iconAnchor:   [13, 39],
        	shadowAnchor: [12, 50],
        	popupAnchor:  [-3, -76]
   	 }
	});  
	  
	var azoriusIcon = new GuildIcon({iconUrl: 'Icons/Azorius-Icon.png'}),
    	    borosIcon = new GuildIcon({iconUrl: 'Icons/Boros-Icon.png'}),
	    dimirIcon = new GuildIcon({iconUrl: 'Icons/Dimir-Icon.png'}),
	    golgariIcon = new GuildIcon({iconUrl: 'Icons/Golgari-Icon.png'}),
	    gruulIcon = new GuildIcon({iconUrl: 'Icons/Gruul-Icon.png'}),
	    izzetIcon = new GuildIcon({iconUrl: 'Icons/Izzet-Icon.png'}),
	    rakdosIcon = new GuildIcon({iconUrl: 'Icons/Rakdos-Icon.png'}),
	    selesnyaIcon = new GuildIcon({iconUrl: 'Icons/Selesnya-Icon.png'}),
	    simicIcon = new GuildIcon({iconUrl: 'Icons/Simic-Icon.png'}),
    	    orzhovIcon = new GuildIcon({iconUrl: 'Icons/Orzhov-Icon.png'});  
	  
	L.marker([40.63903, -74.26952], {icon: selesnyaIcon, title:'Food Pantry'}).addTo(map);
	L.marker([40.63159, -74.25525], {icon: borosIcon, title:'141st Garrison'}).addTo(map);
	L.marker([40.62241, -74.28258], {icon: selesnyaIcon, title:'Vernadi'}).addTo(map);
	L.marker([40.61296, -74.29110], {icon: simicIcon, title:'Hospital'}).addTo(map);
	L.marker([40.61056, -74.27659], {icon: rakdosIcon, title:'Entertainment Venue'}).addTo(map);
	L.marker([40.60591, -74.27409], {icon: azoriusIcon, title:'District 66 Senator Office'}).addTo(map);
	L.marker([40.60471, -74.27431], {icon: borosIcon, title:'142nd Garrison'}).addTo(map);
	L.marker([40.60312, -74.27591], {icon: selesnyaIcon, title:'Food Pantry'}).addTo(map);
	L.marker([40.59193, -74.29033], {icon: rakdosIcon, title:'Amusement Park'}).addTo(map);
	L.marker([40.59095, -74.22953], {icon: simicIcon, title:'Medemerge'}).addTo(map);
	L.marker([40.57719, -74.22338], {icon: rakdosIcon, title:'Factory'}).addTo(map);
	L.marker([40.57541, -74.21777], {icon: borosIcon, title:'144th Garrison'}).addTo(map);
	  
	mb.on('databaseloaded', function(ev) {
		console.info('MBTiles DB loaded', ev);
	});
	mb.on('databaseerror', function(ev) {
		console.info('MBTiles DB error', ev);
	});

</script>
</body>
</html>
